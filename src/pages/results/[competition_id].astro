---
import { db, eq, Competition } from 'astro:db';
import Layout from '../../layouts/Layout.astro';
import type { TCompetition } from '../../types/TCompetition';
import type { TCompetitionResults } from '../../types/TCompetitionResults'
import { Competition_Result } from 'astro:db';
import { BOAT_TYPES } from '../../consts/BoatTypes'

export const prerender = false

const { competition_id } = Astro.params
const competitionId = parseInt(competition_id);

// TODO: OPTIMIZAR CONSULTAS CON eq
const competitions: TCompetition[] = await db.select().from(Competition)
const [competition] = competitions.filter((competition) => competition.id === competitionId)
const results: TCompetitionResults[] = await db.select().from(Competition_Result)
const filteredResults = results.filter(result => result.competition_id === competitionId); 
---
<Layout title={"Competicion"}>
	
</Layout>